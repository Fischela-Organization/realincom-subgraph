
type DigiSale @entity {
  id: ID!
  auctionId: ID
  digi: Digi!
  # isOnSale: Boolean #set isOnsale = true when OfferCreated, AuctionCreated is emitted, and isOnSale = false when OfferCancelled, OfferPurchased, AuctionCancelled, AuctionPurchased, AuctionResulted is called
  amount: BigInt #can be reserved_price for auction or price for fixed
  isOnSale: Boolean
  startTime: BigInt
  endTime: BigInt
  duration: BigInt
  buyer: User
  seller: User
}

type Dispute @entity {
  id: ID!
  payee: User
  disputeReporter: User
  auctionId: ID
  message: String
  email: String
  phone: String
  fundReceiver: User
  payment: BigInt
  disputeId: String
}

type Digi @entity {
  id: ID!
  metadataURI: String!
  baseURI: String
  created: BigInt
  ownerAddress: User!
  creator: User!
  title: String
  description: String
  worth: BigInt
}

type User @entity{
  id: ID!
  networth: BigInt
  digis: [Digi!] @derivedFrom(field: "ownerAddress")
  disputes: [Dispute!] @derivedFrom(field: "disputeReporter")
  created: [Digi!] @derivedFrom(field: "creator")
}
